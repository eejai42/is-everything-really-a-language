[
  {
    "erb_customization_id": "03a-customize-schema-sql",
    "name": "03a-customize-schema.sql",
    "title": "Customize Schema",
    "sql_code": "-- ============================================================================\n-- CUSTOMIZE SCHEMA - User-defined tables and schema modifications\n-- ============================================================================\n-- This file is for YOUR custom schema changes that should persist across\n-- regeneration of the base ERB files.\n--\n-- USE THIS FILE FOR:\n--   - Additional tables not defined in the rulebook\n--   - Extra columns on existing tables (ALTER TABLE)\n--   - Custom indexes for performance tuning\n--   - Custom constraints or triggers\n--\n-- IMPORTANT:\n--   - This file runs AFTER 01-drop-and-create-tables.sql\n--   - The base tables already exist when this runs\n--   - This file will NOT be overwritten by ERB regeneration\n--\n-- ============================================================================\n\n-- Your custom schema changes go here:\n",
    "sql_target": "Postgres",
    "customization_type": "Schema"
  },
  {
    "erb_customization_id": "03b-customize-functions-sql",
    "name": "03b-customize-functions.sql",
    "title": "Customize Functions",
    "sql_code": "-- Formula: =\"Is \" & {{Name}} & \" a language?\"\nCREATE OR REPLACE FUNCTION calc_language_candidates_family_feud_question(p_language_candidate_id TEXT)\nRETURNS TEXT AS $$\n  SELECT 'Is ' || COALESCE(name, '') || ' a language?'\n  FROM language_candidates\n  WHERE language_candidate_id = p_language_candidate_id;\n$$ LANGUAGE SQL STABLE SECURITY DEFINER;\n\n-- Formula: =IF(NOT({{PredictedAnswer}} = {{IsLanguage}}),\n--   {{Name}} & \" \" & IF({{PredictedAnswer}}, \"Is\", \"Isn't\") & \" a Family Feud Language, but \" &\n--   IF({{IsLanguage}}, \"Is\", \"Is Not\") & \" marked as a 'Language Candidate.'\") &\n--   IF({{IsOpenClosedWorldConflicted}}, \" - Open World vs. Closed World Conflict.\")\nCREATE OR REPLACE FUNCTION calc_language_candidates_family_feud_mismatch(p_language_candidate_id TEXT)\nRETURNS TEXT AS $$\n  SELECT\n    CASE\n      WHEN COALESCE(calc_language_candidates_predicted_answer(p_language_candidate_id), FALSE)\n           = COALESCE(is_language, FALSE)\n      THEN\n        CASE\n          WHEN calc_language_candidates_is_open_closed_world_conflicted(p_language_candidate_id)\n          THEN ' - Open World vs. Closed World Conflict.'\n          ELSE NULL\n        END\n      ELSE name || ' ' ||\n           CASE WHEN calc_language_candidates_predicted_answer(p_language_candidate_id) THEN 'Is' ELSE 'Isn''t' END ||\n           ' a Family Feud Language, but ' ||\n           CASE WHEN is_language THEN 'Is' ELSE 'Is Not' END ||\n           ' marked as a ''Language Candidate.''' ||\n           CASE\n             WHEN calc_language_candidates_is_open_closed_world_conflicted(p_language_candidate_id)\n             THEN ' - Open World vs. Closed World Conflict.'\n             ELSE ''\n           END\n    END\n  FROM language_candidates\n  WHERE language_candidate_id = p_language_candidate_id;\n$$ LANGUAGE SQL STABLE SECURITY DEFINER;",
    "sql_target": "Postgres",
    "customization_type": "Functions"
  },
  {
    "erb_customization_id": "03c-customize-views-sql",
    "name": "03c-customize-views.sql",
    "title": "Customize Views",
    "sql_code": "-- ============================================================================\n-- CUSTOMIZE VIEWS - User-defined views and view extensions\n-- ============================================================================\n-- This file is for YOUR custom views that should persist across\n-- regeneration of the base ERB files.\n--\n-- IMPORTANT:\n--   - This file runs AFTER 03-create-views.sql\n--   - All base vw_* views already exist when this runs\n--   - This file will NOT be overwritten by ERB regeneration\n--\n-- ============================================================================\n\n-- Your custom views go here:\n",
    "sql_target": "Postgres",
    "customization_type": "Views"
  },
  {
    "erb_customization_id": "03d-customize-rls-sql",
    "name": "03d-customize-rls.sql",
    "title": "Customize Policies (RLS)",
    "sql_code": "-- ============================================================================\n-- CUSTOMIZE POLICIES - User-defined Row Level Security policies\n-- ============================================================================\n-- This file is for YOUR custom RLS policies that should persist across\n-- regeneration of the base ERB files.\n--\n-- IMPORTANT:\n--   - This file runs AFTER 04-create-policies.sql\n--   - Base RLS policies already exist when this runs\n--   - This file will NOT be overwritten by ERB regeneration\n--\n-- ============================================================================\n\n-- Your custom policies go here:\n",
    "sql_target": "Postgres",
    "customization_type": "RLS"
  },
  {
    "erb_customization_id": "03e-customize-data-sql",
    "name": "03e-customize-data.sql",
    "title": "Customize Data (Seeds / Migrations)",
    "sql_code": "-- ============================================================================\n-- CUSTOMIZE DATA - User-defined seed data and data migrations\n-- ============================================================================\n-- This file is for YOUR custom seed data that should persist across\n-- regeneration of the base ERB files.\n--\n-- IMPORTANT:\n--   - This file runs AFTER 05-insert-data.sql\n--   - Base seed data already exists when this runs\n--   - This file will NOT be overwritten by ERB regeneration\n--\n-- ============================================================================\n\n-- Your custom data inserts go here:\n",
    "sql_target": "Postgres",
    "customization_type": "Data"
  }
]