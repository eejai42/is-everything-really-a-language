# SPARQL CONSTRUCT Queries for ERB

# Each query computes a derived/calculated field

# Queries are separated by double newlines



# Computed field: FullName
# Formula: ={{FirstName}} & " " & {{LastName}}
PREFIX erb: <http://example.org/erb#>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>

CONSTRUCT {
    ?entity erb:fullName ?_result .
}
WHERE {
    ?entity a erb:Customers .
    OPTIONAL { ?entity erb:firstName ?first_name . }
    OPTIONAL { ?entity erb:lastName ?last_name . }
    BIND(CONCAT(?first_name, " ", ?last_name) AS ?_result)
}

# Computed field: Name
# Formula: ="ORD" & {{OrderNumber}}
PREFIX erb: <http://example.org/erb#>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>

CONSTRUCT {
    ?entity erb:name ?_result .
}
WHERE {
    ?entity a erb:Orders .
    OPTIONAL { ?entity erb:orderNumber ?order_number . }
    BIND(CONCAT("ORD", ?order_number) AS ?_result)
}

# Computed field: CustomerEmailAddress

# Formula parse error: Unexpected character '!' at position 15



# Computed field: CustomerFullName

# Formula parse error: Unexpected character '!' at position 15

